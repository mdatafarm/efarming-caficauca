@model EFarming.DTO.FarmModule.FarmDTO

@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@section scripts{
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
    <script src="~/Scripts/highcharts/highcharts.js"></script>
    <script src="~/Scripts/highcharts/highcharts-more.js"></script>
    <script src="~/Scripts/highcharts/solid-gauge.src.js"></script>
    <script src="~/Scripts/highcharts/exporting.js"></script>
    <script src="~/Scripts/dashboard/Common.js"></script>
    <script src="~/Scripts/dashboard/farm_dashboard.js"></script>
    <script src="~/Scripts/dashboard/farm-indicators.js"></script>
    <script src="~/Scripts/dashboard/traceability.js"></script>
}
@section breadcrumb{
    <div class="row wrapper border-bottom white-bg page-heading">
        <div class="col-lg-10">
            <h2 class="page-name">@DashboardMessage.Farm_Dashboard</h2>
            <ol class="breadcrumb">
                <li><a href="@Url.Action("Index", "Home", new { })">@Message.Home</a></li>
                <li><a href="@Url.Action("Index", "Farms", new { })">@FarmMessages.Farms</a></li>
                <li><a href="@Url.Action("Edit", "Farms", new { id = Model.Id })">@Model.Name</a></li>
                <li class="active">@Message.Dashboard</li>
            </ol>
        </div>
        <div class="col-lg-2">
        </div>
    </div>
}
<div class="wrapper wrapper-content">
    <div class="row">
        <div class="col-lg-12">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5>@DashboardMessage.Farm_Dashboard</h5>
                    <div class="ibox-tools">
                        <a href="#" data-toggle="dropdown" class="dropdown-toggle">
                            <i class="fa fa-bars"></i>
                        </a>
                        <ul class="dropdown-menu dropdown-user dropdown-menu-right">
                            <li>
                                <a href="@Url.Action("Export", "Farms", new { id = Model.Id })" target="_blank">@ExportMessage.To_PDF</a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="ibox-content">
                    <div class="flot-chart farm-search">
                        <ul class="nav nav-tabs" role="tablist">
                            <li class="active">
                                <a id="information-tab" href="#information" role="tab" data-toggle="tab">@Message.Information</a>
                            </li>
                            <li>
                                <a id="chart-tab" href="#charts" role="tab" data-toggle="tab">@Message.Charts</a>
                            </li>
                            <li role="presentation">
                                <a id="photo-tab" href="#photos" role="tab" data-toggle="tab">@FarmMessages.Photo_Gallery</a>
                            </li>
                            @*<li role="presentation">
                                <a id="location-tab" href="#location" role="tab" data-toggle="tab">@Message.Location</a>
                            </li>*@
                        </ul>
                        <div class="tab-content">
                            <div class="tab-pane fade in active" role="tabpanel" id="information">
                                <div class="row">
                               @if (@Model.SupplyChain != null)
    {
                                    <div class="col-lg-4">
                                        <div class="row">
                                            <div class="col-lg-12">
                                                <h3 class="text-center text-capitalize">@Message.Country</h3>
                                            </div>
                                            <div class="col-lg-12">
                                           
                                                <p class="text-center text-capitalize">
                                                    @Model.SupplyChain.Supplier.Country.Name
                                                </p>
                                            
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-4">
                                        <div class="row">
                                            <div class="col-lg-12">
                                                <h3 class="text-center text-capitalize">@Message.Supplier</h3>
                                            </div>
                                            <div class="col-lg-12">
                                                
                                                    <p class="text-center text-capitalize">
                                                        @Model.SupplyChain.Supplier.Name
                                                    </p>
                                                
                                                
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-4">
                                        <div class="row">
                                            <div class="col-lg-12">
                                                <h3 class="text-center text-capitalize">@Message.SupplierChain</h3>
                                            </div>
                                            <div class="col-lg-12">
                                               
                                                    <p class="text-center text-capitalize">
                                                        @Model.SupplyChain.Name
                                                    </p>
                                               
                                                
                                            </div>
                                        </div>
                                    </div>
                             } 
                                    <div class="col-lg-4">
                                        <div class="row">
                                            <div class="col-lg-12">
                                                <h3 class="text-center text-capitalize">@AdminMessage.Department</h3>
                                            </div>
                                            <div class="col-lg-12">
                                                <p class="text-center text-capitalize">
                                                    @Model.Village.Municipality.Department.Name
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-4">
                                        <div class="row">
                                            <div class="col-lg-12">
                                                <h3 class="text-center text-capitalize">@AdminMessage.Municipality</h3>
                                            </div>
                                            <div class="col-lg-12">
                                                <p class="text-center text-capitalize">
                                                    @Model.Village.Municipality.Name
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-4">
                                        <div class="row">
                                            <div class="col-lg-12">
                                                <h3 class="text-center text-capitalize">@AdminMessage.Village</h3>
                                            </div>
                                            <div class="col-lg-12">
                                                <p class="text-center text-capitalize">
                                                    @Model.Village.Name
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <hr />
                                <div class="row">

                                    <div class="col-md-12">
                                        <table class="table table-responsive table-hover">
                                            <tbody>
                                                <tr>
                                                    <td><b>Average age</b></td>
                                                    <td>@Model.Productivity.averageAge.ToString("0.##")</td>
                                                </tr>
                                                <tr>
                                                    <td><b>Average density</b></td>
                                                    <td>@Convert.ToDouble(Model.Productivity.averageDensity.Replace(".", ",")).ToString("0.##")</td>
                                                </tr>
                                                <tr>
                                                    <td><b>Coffee area</b></td>
                                                    <td>@Model.Productivity.coffeeArea</td>
                                                </tr>
                                                <tr>
                                                    <td><b>Estimated production</b></td>
                                                    <td>@Model.Productivity.estimatedProduction</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>

                                    <div class="col-md-12">
                                        <br />
                                        <h4 class="page-header text-capitalize">Productive trees</h4>
                                        <table class="table table-responsive table-hover">
                                            <tbody>
                                                <tr>
                                                    <td><b>Productive trees</b></td>
                                                    <td>@Model.Productivity.productionPlants</td>
                                                </tr>
                                                <tr>
                                                    <td><b>Productive trees (%)</b></td>
                                                    <td>% @Model.Productivity.productionPercentage.ToString("0.##")</td>
                                                </tr>
                                                <tr>
                                                    <td><b>Productive area</b></td>
                                                    <td>@Model.Productivity.productionArea</td>
                                                </tr>
                                                <tr>
                                                    <td><b>Productive area (%)</b></td>
                                                    <td>% @Model.Productivity.productionAreaPercentage.ToString("0.##")</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>

                                    <div class="col-md-12">
                                        <br />
                                        <h4 class="page-header text-capitalize">Growing trees</h4>
                                        <table class="table table-responsive table-hover">
                                            <tbody>
                                                <tr>
                                                    <td><b>Growing trees</b></td>
                                                    <td>@Model.Productivity.growingPlants</td>
                                                </tr>
                                                <tr>
                                                    <td><b>Growing trees (%)</b></td>
                                                    <td>% @Model.Productivity.growingPercentage.ToString("0.##")</td>
                                                </tr>
                                                <tr>
                                                    <td><b>Growing area</b></td>
                                                    <td>@Model.Productivity.growingArea</td>
                                                </tr>
                                                <tr>
                                                    <td><b>Growing area (%)</b></td>
                                                    <td>% @Model.Productivity.growingAreaPercentage.ToString("0.##")</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>

                                    <div class="col-md-12">
                                        <br />
                                        <h4 class="page-header text-capitalize">Varieties Information</h4>
                                        <table class="table table-responsive table-hover">
                                            <tbody>
                                                <tr>
                                                    <td><b>Colombia (%)</b></td>
                                                    <td class="align-right">% @Model.Productivity.percentageColombia.ToString("0.##")</td>
                                                </tr>
                                                <tr>
                                                    <td><b>Caturra (%)</b></td>
                                                    <td class="align-right">% @Model.Productivity.percentageCaturra.ToString("0.##")</td>
                                                </tr>
                                                <tr>
                                                    <td><b>Castillo (%)</b></td>
                                                    <td class="align-right">% @Model.Productivity.percentageCastillo.ToString("0.##")</td>
                                                </tr>
                                                <tr>
                                                    <td><b>Other (%)</b></td>
                                                    <td class="align-right">% @Model.Productivity.percentageotra.ToString("0.##")</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane fade in" role="tabpanel" id="charts">
                                <div class="row">
                                    <div class="col-lg-6">
                                        <div class="charts" id="workers">
                                        </div>
                                    </div>
                                    <div class="col-lg-6">
                                        <div class="charts" id="salesByHa">
                                        </div>
                                    </div>
                                    <div class="col-lg-6">
                                        <div class="charts" id="FertilizersByYear">
                                        </div>
                                    </div>
                                    <div class="col-lg-6">
                                        <div class="charts" id="FertilizersByHaByYear">
                                        </div>
                                    </div>
                                    <div class="col-lg-12">
                                        <div class="charts" id="volume">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            @*<div id="location" class="tab-pane fade in" role="tab">
                                <div class="row">
                                    <div class="col-lg-12">
                                        <div class="embed-responsive embed-responsive-16by9" id="map-canvas">
                                        </div>
                                    </div>
                                </div>
                            </div>*@
                            <div id="photos" class="tab-pane fade in" role="tab">
                                <div class="row">
                                    <div class="col-lg-10 col-lg-offset-1">
                                        @if (Model.Images != null && Model.Images.Count > 0)
                                        {
                                            @Html.Partial("~/Views/Farms/_Carousel.cshtml", Model)
                                        }
                                        else
                                        {
                                            @FarmMessages.No_Photos_Found
                                        }
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
    var start = new Date().getFullYear() + '-01-01';
    var end = '';
    var lotid = '';
    var farmid = '@ViewBag.FarmId';
    var farmId = "@ViewBag.FarmId";
    var longitude = "@Model.GeoLocation.Longitude".replace(',', '.');
    var latitude = "@Model.GeoLocation.Latitude".replace(',', '.');
    var density_value = "@string.Format("{0:0.##}", Model.DensityIndicator)".replace(",", ".") * 1;
    var fertilizer_value = "@string.Format("{0:0.##}", Model.FertilizerIndicator)".replace(",", ".") * 1;
    var productivity_value = "@string.Format("{0:0.##}", Model.ProductivityIndicator)".replace(",", ".") * 1;
    var age_value = "@Model.AgeIndicator".replace(",", ".") * 1;
</script>
